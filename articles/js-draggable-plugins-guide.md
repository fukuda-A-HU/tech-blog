---
title: "Shopify Draggableã®ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’ä½¿ã£ã¦ãƒ‰ãƒ©ãƒƒã‚°&ãƒ‰ãƒ­ãƒƒãƒ—æ©Ÿèƒ½ã‚’æ‹¡å¼µã™ã‚‹"
emoji: "ğŸ”Œ"
type: "tech"
topics: ["javascript", "draggable", "frontend", "web", "ui"]
published: false
---

## ã‚´ãƒ¼ãƒ«(ã¯ã˜ã‚ã«)ï¼šShopify Draggableã®ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’æ´»ç”¨ã—ã¦ãƒ‰ãƒ©ãƒƒã‚°&ãƒ‰ãƒ­ãƒƒãƒ—æ©Ÿèƒ½ã‚’å¼·åŒ–ã™ã‚‹

Shopify Draggableãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚·ã‚¹ãƒ†ãƒ ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã§ã€ãƒ‰ãƒ©ãƒƒã‚°&ãƒ‰ãƒ­ãƒƒãƒ—ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½“é¨“ã‚’å¤§å¹…ã«æ”¹å–„ã§ãã¾ã™ã€‚ã“ã®è¨˜äº‹ã§ã¯ã€ã‚ˆãä½¿ç”¨ã•ã‚Œã‚‹ä¸»è¦ãªãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã®å®Ÿè£…æ–¹æ³•ã¨ã€ã‚«ã‚¹ã‚¿ãƒ ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã®ä½œæˆæ–¹æ³•ã«ã¤ã„ã¦è§£èª¬ã—ã¾ã™ã€‚

## ã‚„ã£ã¦ã¿ãŸçµæœ

ä»¥ä¸‹ã®ã‚ˆã†ãªæ©Ÿèƒ½ã‚’ç°¡å˜ã«å®Ÿè£…ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ï¼š
- ã‚¹ãƒ ãƒ¼ã‚ºãªã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³åŠ¹æœ
- è‡ªå‹•ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«
- è¦ç´ ã®ã‚¹ãƒŠãƒƒãƒ—æ©Ÿèƒ½
- ãƒ‰ãƒ©ãƒƒã‚°ä¸­ã®åˆ¶ç´„è¨­å®š
- ã‚«ã‚¹ã‚¿ãƒ ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³

ã“ã®è¨˜äº‹ã‚’èª­ã‚€ã“ã¨ã§ã€ã‚ˆã‚Šæ´—ç·´ã•ã‚ŒãŸãƒ‰ãƒ©ãƒƒã‚°&ãƒ‰ãƒ­ãƒƒãƒ—ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã‚’å®Ÿè£…ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚

## é–‹ç™ºç’°å¢ƒ
- ä»»æ„ã®ãƒ¢ãƒ€ãƒ³ãƒ–ãƒ©ã‚¦ã‚¶ï¼ˆChrome, Firefox, Safariç­‰ï¼‰
- ãƒ†ã‚­ã‚¹ãƒˆã‚¨ãƒ‡ã‚£ã‚¿ï¼ˆVS Codeæ¨å¥¨ï¼‰
- Node.jsï¼ˆnpmã§ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹å ´åˆï¼‰

ãƒ•ã‚©ãƒ«ãƒ€æ§‹é€ ï¼š
```
draggable-plugins-demo/
â”œâ”€â”€ index.html
â”œâ”€â”€ styles.css
â”œâ”€â”€ script.js
â””â”€â”€ package.json
```

## äº‹å‰æº–å‚™

åŸºæœ¬çš„ãªDraggableã®ä½¿ç”¨æ–¹æ³•ã‚’ç†è§£ã—ã¦ã„ã‚‹ã“ã¨ãŒæœ›ã¾ã—ã„ã§ã™ãŒã€åˆã‚ã¦ã®æ–¹ã§ã‚‚ç†è§£ã§ãã‚‹ã‚ˆã†ã«èª¬æ˜ã—ã¾ã™ã€‚

## ã‚„ã£ãŸã“ã¨

### 1. åŸºæœ¬çš„ãªãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã®ä½¿ã„æ–¹

ã¾ãšã€Draggableã®ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚·ã‚¹ãƒ†ãƒ ã®åŸºæœ¬çš„ãªä½¿ã„æ–¹ã‚’èª¬æ˜ã—ã¾ã™ã€‚ä»¥ä¸‹ã®HTMLã‹ã‚‰å§‹ã‚ã¾ã—ã‚‡ã†ï¼š

```html
<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Draggable Plugins ãƒ‡ãƒ¢</title>
  <style>
    .container {
      padding: 20px;
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 10px;
    }
    
    .draggable-item {
      background: #3498db;
      color: white;
      padding: 20px;
      text-align: center;
      cursor: move;
      user-select: none;
      border-radius: 4px;
    }
    
    .draggable-item.draggable--over {
      background: #2980b9;
    }
    
    .draggable-item.draggable--animation {
      transition: transform 0.2s ease;
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="draggable-item">Item 1</div>
    <div class="draggable-item">Item 2</div>
    <div class="draggable-item">Item 3</div>
    <div class="draggable-item">Item 4</div>
    <div class="draggable-item">Item 5</div>
    <div class="draggable-item">Item 6</div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/@shopify/draggable@1.0.0-beta.12/lib/draggable.bundle.js"></script>
  <script src="script.js"></script>
</body>
</html>
```

### 2. ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã®å®Ÿè£…

script.jsã«ä»¥ä¸‹ã®ã‚³ãƒ¼ãƒ‰ã‚’è¿½åŠ ã—ã¦ã€ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’å®Ÿè£…ã—ã¾ã™ï¼š

```javascript
// ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã®å®šç¾©
class AnimatePlugin extends Draggable.Plugins.AbstractPlugin {
  static get pluginName() {
    return 'animate';
  }

  getDefaultOptions() {
    return {
      duration: 200,
      easingFunction: 'ease-in-out'
    };
  }

  attach() {
    this.draggable.on('drag:start', this.onDragStart.bind(this));
    this.draggable.on('drag:stop', this.onDragStop.bind(this));
  }

  onDragStart(event) {
    event.source.classList.add('draggable--animation');
  }

  onDragStop(event) {
    setTimeout(() => {
      event.source.classList.remove('draggable--animation');
    }, this.options.duration);
  }
}

// Draggableã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã®ä½œæˆã¨ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã®é©ç”¨
const draggable = new Draggable.Sortable(document.querySelectorAll('.container'), {
  draggable: '.draggable-item',
  plugins: [AnimatePlugin]
});
```

### 3. ã‚¹ãƒŠãƒƒãƒ—ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã®è¿½åŠ 

ã‚°ãƒªãƒƒãƒ‰ã¸ã®ã‚¹ãƒŠãƒƒãƒ—æ©Ÿèƒ½ã‚’å®Ÿè£…ã™ã‚‹ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’è¿½åŠ ã—ã¾ã™ï¼š

```javascript
class SnapPlugin extends Draggable.Plugins.AbstractPlugin {
  static get pluginName() {
    return 'snap';
  }

  getDefaultOptions() {
    return {
      gridSize: 20
    };
  }

  attach() {
    this.draggable.on('drag:move', this.onDragMove.bind(this));
  }

  onDragMove(event) {
    const { gridSize } = this.options;
    const { source } = event;
    
    // ç¾åœ¨ã®ä½ç½®ã‚’å–å¾—
    const rect = source.getBoundingClientRect();
    const x = rect.left;
    const y = rect.top;
    
    // ã‚°ãƒªãƒƒãƒ‰ã«ã‚¹ãƒŠãƒƒãƒ—
    const snappedX = Math.round(x / gridSize) * gridSize;
    const snappedY = Math.round(y / gridSize) * gridSize;
    
    // ä½ç½®ã‚’æ›´æ–°
    source.style.transform = `translate3d(${snappedX}px, ${snappedY}px, 0)`;
  }
}

// ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’è¿½åŠ 
draggable.addPlugin(SnapPlugin);
```

### 4. è‡ªå‹•ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã®å®Ÿè£…

ãƒ‰ãƒ©ãƒƒã‚°ä¸­ã«ç”»é¢ç«¯ã«è¿‘ã¥ãã¨è‡ªå‹•ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã™ã‚‹æ©Ÿèƒ½ã‚’è¿½åŠ ã—ã¾ã™ï¼š

```javascript
class AutoScrollPlugin extends Draggable.Plugins.AbstractPlugin {
  static get pluginName() {
    return 'autoScroll';
  }

  getDefaultOptions() {
    return {
      margin: 50,
      speed: 10
    };
  }

  attach() {
    this.scrollInterval = null;
    this.draggable.on('drag:move', this.onDragMove.bind(this));
    this.draggable.on('drag:stop', this.onDragStop.bind(this));
  }

  onDragMove(event) {
    const { clientY } = event.sensorEvent;
    const { innerHeight } = window;
    const { margin, speed } = this.options;

    if (clientY < margin) {
      // ä¸Šã«ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«
      this.startScrolling(-speed);
    } else if (clientY > innerHeight - margin) {
      // ä¸‹ã«ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«
      this.startScrolling(speed);
    } else {
      this.stopScrolling();
    }
  }

  onDragStop() {
    this.stopScrolling();
  }

  startScrolling(speed) {
    if (this.scrollInterval) return;
    
    this.scrollInterval = setInterval(() => {
      window.scrollBy(0, speed);
    }, 16);
  }

  stopScrolling() {
    if (this.scrollInterval) {
      clearInterval(this.scrollInterval);
      this.scrollInterval = null;
    }
  }
}

// ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’è¿½åŠ 
draggable.addPlugin(AutoScrollPlugin);
```

## çµè«–ã«å¯¾ã—ã¦ã®è£œè¶³

### ãƒ—ãƒ©ã‚°ã‚¤ãƒ³é–‹ç™ºã®ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹

1. **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã®è€ƒæ…®**
   - é‡ã„å‡¦ç†ã¯`requestAnimationFrame`ã‚’ä½¿ç”¨
   - ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼ã¯é©åˆ‡ã«ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—

2. **ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°**
   - ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã®ãƒ¡ã‚½ãƒƒãƒ‰å†…ã§try-catchã‚’ä½¿ç”¨
   - ã‚¨ãƒ©ãƒ¼çŠ¶æ…‹ã‚’ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«é€šçŸ¥

3. **ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã®æŸ”è»Ÿæ€§**
   - ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã‚’æä¾›
   - ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³å®Ÿè£…

### é–¢é€£ãƒªãƒ³ã‚¯
- [Shopify Draggable GitHub](https://github.com/Shopify/draggable)
- [Draggable ãƒ—ãƒ©ã‚°ã‚¤ãƒ³API](https://github.com/Shopify/draggable/tree/master/src/Plugins)
- [AbstractPlugin ã‚¯ãƒ©ã‚¹](https://github.com/Shopify/draggable/blob/master/src/Plugins/AbstractPlugin/AbstractPlugin.js)

## ãŠã‚ã‚Šã«

Shopify Draggableã®ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚·ã‚¹ãƒ†ãƒ ã‚’æ´»ç”¨ã™ã‚‹ã“ã¨ã§ã€ãƒ‰ãƒ©ãƒƒã‚°&ãƒ‰ãƒ­ãƒƒãƒ—ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½“é¨“ã‚’å¤§ããå‘ä¸Šã•ã›ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚åŸºæœ¬çš„ãªãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‹ã‚‰å§‹ã‚ã¦ã€å¾ã€…ã«è¤‡é›‘ãªæ©Ÿèƒ½ã‚’è¿½åŠ ã—ã¦ã„ãã“ã¨ã§ã€ã‚ˆã‚Šæ´—ç·´ã•ã‚ŒãŸã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã‚’æ§‹ç¯‰ã§ãã¾ã™ã€‚

ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã®é–‹ç™ºã«ã¯ã€ãƒ¦ãƒ¼ã‚¶ãƒ“ãƒªãƒ†ã‚£ã¨ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã®ãƒãƒ©ãƒ³ã‚¹ã‚’è€ƒæ…®ã™ã‚‹ã“ã¨ãŒé‡è¦ã§ã™ã€‚ã¾ãŸã€ä»–ã®é–‹ç™ºè€…ãŒä½¿ç”¨ã™ã‚‹ã“ã¨ã‚’æƒ³å®šã—ã¦ã€é©åˆ‡ãªãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã¨ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã‚’å®Ÿè£…ã™ã‚‹ã“ã¨ã‚’ãŠå‹§ã‚ã—ã¾ã™ã€‚

ä»Šå›ç´¹ä»‹ã—ãŸãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã¯åŸºæœ¬çš„ãªå®Ÿè£…ä¾‹ã§ã™ãŒã€ã“ã‚Œã‚‰ã‚’ãƒ™ãƒ¼ã‚¹ã«ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®è¦ä»¶ã«åˆã‚ã›ã¦ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã—ã¦ã„ãã“ã¨ã§ã€ã‚ˆã‚Šé«˜åº¦ãªæ©Ÿèƒ½ã‚’å®Ÿç¾ã§ãã¾ã™ã€‚
